from math import ceil


class CuttingBars:
    def cutting_bars_dfs(self, arr, n):
        memo = [0 for _ in range(n + 1)]
        return self.dfs(arr, n, memo)

    def dfs(self, arr, n, memo):
        if n == 0:
            return 0
        if memo[n] != 0:
            return memo[n]
        ans = 0
        for i in range(n):
            ans = max(ans, arr[i] + self.dfs(arr, n - i - 1, memo))
        memo[n] = ans
        return ans

    def cutting_bars_dp(self, arr, n):
        dp = [0] + arr[:n]
        for i in range(1, n + 1):
            for j in range(i, ceil(i / 2) - 1, -1):
                dp[i] = max(dp[i], dp[j] + dp[i - j])
        return dp[n]


if __name__ == '__main__':
    sol = CuttingBars()
    test = [1, 5, 8, 9, 10, 17, 17, 20, 24, 30, 1, 2, 3, 4, 5, 6, 7, 10, 12, 11, 20, 1, 1, 2, 3, 10, 17, 17, 20, 24, 30,
            1, 2, 3, 4, 5, 6, 7, 10, 10, 17, 17, 20, 24, 30, 1, 2, 3, 4, 5, 6, 7, 10, 1000, 2, 13, 200, 20, 24, 30, 1,
            2, 3, 4, 5, 6, 7, 10, 1000, 2, 13, 200, 20, 24, 30, 1, 2, 3, 4, 5, 6, 7, 10, 1000, 2, 13, 200, 1230, 500,
            213, 1231, 1232, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123,
            577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123,
            577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123,
            577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123,
            577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577,
            3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411, 4211, 4213, 411, 424, 2132, 351, 4123, 577, 3411,
            3411, 4211, 4213, 411]
    # print(sol.cutting_bars_dfs(test, 4))
    # print(sol.cutting_bars_dp(test, 4))
    print(len(test))
    for i in range(len(test)):
        # print(i)
        assert sol.cutting_bars_dfs(test, i) == sol.cutting_bars_dp(test, i)
